import{k as p,G as U,H as D,Q as w,C as L,o as M,E as R,b as i,d as o,e,B as N,w as h,z as S,t as f,f as l,F as k,A as F,v as T}from"./app-1c59e5b4.js";import{d as V,u as j,a as q,r as z,m as A}from"./rules-9cc51195.js";function C(){const _=p({name:"",email:""});U();const r=p({}),n=p(!1),d=D("$swal");return{profile:_,getProfile:async()=>{_.value=w.getters["auth/user"]},updateProfile:async c=>{n.value||(n.value=!0,r.value={},axios.put("/api/user",c).then(({data:s})=>{s.success&&(w.commit("auth/SET_USER",s.data),d({icon:"success",title:"Profile updated successfully"}))}).catch(s=>{var u;(u=s.response)!=null&&u.data&&(r.value=s.response.data.errors)}).finally(()=>n.value=!1))},validationErrors:r,isLoading:n}}const G={class:"card border-0"},H=e("div",{class:"card-header bg-transparent"},[e("h5",{class:"float-start"},"Profile")],-1),Q={class:"card-body"},$=["onSubmit"],I={class:"mb-3"},J=e("label",{for:"name",class:"form-label"},"Name",-1),K={class:"text-danger mt-1"},O={class:"text-danger mt-1"},W={class:"mb-3"},X=e("label",{for:"email",class:"form-label"},"Email",-1),Y={class:"text-danger mt-1"},Z={class:"text-danger mt-1"},ee={class:"mb-3"},se=["disabled"],ae={class:""},te={key:0},ie={key:1},ne={__name:"index",setup(_){V("required",z),V("min",A);const r={name:"required|min:3",email:"required"},{validate:n,errors:d}=j({validationSchema:r}),{value:b}=q("name",null,{initialValue:""}),{value:g}=q("email",null,{initialValue:""}),{profile:c,getProfile:s,updateProfile:u,validationErrors:y,isLoading:v}=C(),a=L({name:b,email:g});function B(){n().then(x=>{x.valid&&u(a)})}return M(()=>{s()}),R(()=>{a.name=c.value.name,a.email=c.value.email}),(x,m)=>{var P,E;return i(),o("div",G,[H,e("div",Q,[e("form",{onSubmit:N(B,["prevent"])},[e("div",I,[J,h(e("input",{type:"text","onUpdate:modelValue":m[0]||(m[0]=t=>a.name=t),class:"form-control",id:"name"},null,512),[[S,a.name]]),e("div",K,f(l(d).name),1),e("div",O,[(i(!0),o(k,null,F((P=l(y))==null?void 0:P.name,t=>(i(),o("div",null,f(t),1))),256))])]),e("div",W,[X,h(e("input",{type:"email","onUpdate:modelValue":m[1]||(m[1]=t=>a.email=t),class:"form-control",id:"email"},null,512),[[S,a.email]]),e("div",Y,f(l(d).email),1),e("div",Z,[(i(!0),o(k,null,F((E=l(y))==null?void 0:E.email,t=>(i(),o("div",null,f(t),1))),256))])]),e("div",ee,[e("button",{disabled:l(v),class:"btn btn-primary"},[h(e("div",ae,null,512),[[T,l(v)]]),l(v)?(i(),o("span",te,"Processing...")):(i(),o("span",ie,"Update"))],8,se)])],40,$)])])}}};export{ne as default};
