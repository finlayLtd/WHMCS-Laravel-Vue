import{B as Q,b as W,d as X,f as a,r as Z,o as i,c,h as s,t,w as n,C as D,x as h,F as q,s as T,j as d,v as ss,G as r,a as es,z as ts,A as u,e as ls,l as os,i as as}from"./app-d3a86fd1.js";import{c as ns}from"./commonApis-e31faf1f.js";import{P as is}from"./Pagination-69045833.js";import{N as E}from"./NoPermission-2b0d56bb.js";const ds={class:"overview"},rs={class:"container"},cs={class:"d-flex flex-column justify-content-start align-items-start title-button-wrapper"},us={class:"overview-header"},ps={class:"title mb-0"},_s=s("span",null,null,-1),ms={class:"sub-section overview-tab"},vs={class:"row justify-content-between align-items-center"},bs={class:"row mb-2 mb-lg-5 pe-0"},hs={class:"col-md-12 d-flex justify-content-start pe-0 flex-wrap"},gs={style:{"overflow-x":"unset"},class:"nav nav-pills mb-3 mb-md-0 order-1 order-md-2 mb-lg-0 flex-nowrap",id:"pills-tab",role:"tablist"},ws={class:"nav-item",role:"presentation"},fs={class:"nav-link active",id:"pills-overview-tab","data-bs-toggle":"pill","data-bs-target":"#pills-overview",type:"button",role:"tab","aria-controls":"pills-overview","aria-selected":"true"},ys={class:"nav-item",role:"presentation"},ks={class:"nav-link",id:"pills-analytics-tab","data-bs-toggle":"pill","data-bs-target":"#pills-analytics",type:"button",role:"tab","aria-controls":"pills-analytics","aria-selected":"false"},$s={class:"nav-item",role:"presentation"},Ps={class:"nav-link",id:"pills-userManagement-tab","data-bs-toggle":"pill","data-bs-target":"#pills-userManagement",type:"button",role:"tab","aria-controls":"pills-userManagement","aria-selected":"false"},Us={class:"nav-item",role:"presentation"},Cs={class:"nav-link",id:"pills-emails-tab","data-bs-toggle":"pill","data-bs-target":"#pills-emails",type:"button",role:"tab","aria-controls":"pills-emails","aria-selected":"false"},Vs={class:"tab-content settings-tab-content",id:"pills-tabContent"},Ns={class:"tab-pane fade show active",id:"pills-overview",role:"tabpanel","aria-labelledby":"pills-overview-tab"},xs={class:"tab-inner mb-3"},Ss={class:"row"},As={class:"title mb-4"},Ms=s("div",{class:"divider"},null,-1),Bs={key:0,class:"row px-2 pt-4 px-lg-4 pt-lg-4"},Ds={class:"col-12 col-lg-6 tab-inner py-0 p-mb-0"},Es={class:"fs-13-5"},Ls={class:"overview-input mb-4"},js={class:"d-inline"},qs={class:"fs-13-5"},Is={class:"overview-input mb-4"},Fs={class:"d-inline"},Ts={class:"fs-13-5"},zs={class:"overview-input mb-4"},Gs={class:"overview-button-wrapper pt-0"},Hs={class:"tab-pane fade",id:"pills-analytics",role:"tabpanel","aria-labelledby":"pills-analytics-tab"},Os={class:"tab-inner mb-3"},Rs={class:"row"},Ys={class:"title mb-4"},Js=s("div",{class:"divider"},null,-1),Ks={key:0,class:"row px-2 pt-4 px-lg-4 pt-lg-4"},Qs={class:"form-horizontal using-password-strength"},Ws={id:"currentpwBox",class:"form-group"},Xs={for:"currentpw",class:"col-sm-4 control-label"},Zs=s("div",{class:"col-sm-5",style:{position:"relative"}},[s("input",{type:"password",class:"form-control",name:"currentpw",id:"currentpw",autocomplete:"off"}),s("img",{src:"assets/img/eye.svg",class:"settings-password-img icon-password eye-closed"}),s("img",{src:"assets/img/eye-open.svg",class:"settings-password-img icon-password eye-open",style:{display:"none"}}),s("br")],-1),se={id:"newPassword1",class:"form-group has-feedback has-success"},ee={for:"inputNewPassword1",class:"col-sm-4 control-label"},te={class:"col-sm-5",style:{position:"relative"}},le=s("input",{type:"password",class:"form-control",name:"newpw",id:"inputNewPassword1",autocomplete:"off"},null,-1),oe=s("img",{src:"assets/img/eye.svg",class:"settings-password-img icon-password eye-closed"},null,-1),ae=s("img",{src:"assets/img/eye-open.svg",class:"settings-password-img icon-password eye-open",style:{display:"none"}},null,-1),ne=s("br",null,null,-1),ie={class:"progress",id:"passwordStrengthBar"},de={class:"progress-bar progress-bar-success",role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100",style:{width:"0%"}},re={class:"sr-only"},ce={id:"newPassword2",class:"form-group has-feedback has-success"},ue={for:"inputNewPassword2",class:"col-sm-4 control-label"},pe=ts('<div class="col-sm-5" style="position:relative;"><input type="password" class="form-control" name="confirmpw" id="inputNewPassword2" autocomplete="off"><img src="assets/img/eye.svg" class="settings-password-img icon-password eye-closed"><img src="assets/img/eye-open.svg" class="settings-password-img icon-password eye-open" style="display:none;"><div id="inputNewPassword2Msg"></div></div>',1),_e={class:"overview-button-wrapper pt-0 mt-4"},me={class:"col-sm-5"},ve={id:"submitButton",class:"btn-dark px-4 me-2 hover-dark-light",disabled:"disabled"},be={class:"tab-pane fade",id:"pills-userManagement",role:"tabpanel","aria-labelledby":"pills-userManagement-tab"},he={key:0,class:"tab-inner mb-3"},ge={class:"row"},we={class:"title mb-4"},fe=s("div",{class:"divider"},null,-1),ye={class:"row px-2 pt-4 px-lg-4 pt-lg-4"},ke={class:"w-100 mb-5 support-table"},$e={class:"table"},Pe={scope:"col"},Ue={scope:"col"},Ce={key:0,class:"badge bg-info"},Ve=s("br",null,null,-1),Ne=["disabled"],xe=["disabled"],Se=["disabled","onClick"],Ae={class:"row"},Me={class:"title mb-4"},Be=s("div",{class:"divider"},null,-1),De={class:"row px-2 pt-4 px-lg-4 pt-lg-4"},Ee={class:"mb-4"},Le={class:"form-group selectBoxes mt-4"},je={class:"radio-inline",style:{"padding-right":"20px"}},qe={class:"radio-inline"},Ie={class:"well",id:"invitePermissions"},Fe={class:"checkbox-inline"},Te=s("br",null,null,-1),ze={class:"checkbox-inline"},Ge=s("br",null,null,-1),He={class:"checkbox-inline"},Oe=s("br",null,null,-1),Re={class:"checkbox-inline"},Ye=s("br",null,null,-1),Je={class:"checkbox-inline"},Ke=s("br",null,null,-1),Qe={class:"checkbox-inline"},We=s("br",null,null,-1),Xe={class:"checkbox-inline"},Ze=s("br",null,null,-1),st={class:"checkbox-inline"},et=s("br",null,null,-1),tt={class:"checkbox-inline"},lt=s("br",null,null,-1),ot={class:"checkbox-inline"},at=s("br",null,null,-1),nt={class:"checkbox-inline"},it=s("br",null,null,-1),dt={class:"checkbox-inline"},rt=s("br",null,null,-1),ct={class:"checkbox-inline"},ut=s("br",null,null,-1),pt=["disabled"],_t={class:"tab-pane fade",id:"pills-emails",role:"tabpanel","aria-labelledby":"pills-emails-tab"},mt={class:"tab-inner mb-3"},vt={class:"row"},bt={class:"title mb-4"},ht=s("div",{class:"divider"},null,-1),gt={class:"row px-2 pt-4 px-lg-4 pt-lg-4"},wt={class:"w-100 mb-5 support-table"},ft={class:"table"},yt={scope:"col"},kt={scope:"col"},$t={scope:"col"},Pt={key:0},Ut={colspan:"3",style:{"text-align":"center"}},Ct={style:{"margin-top":"20px"}},Vt={class:"date-cell"},Nt={class:"w-100 server-list-pagination"},z=15,Et={__name:"settings",setup(xt){const m=Q.useToast(),g=ns(),G=W(),p=X(()=>G.state.auth.user),w=a([]),v=a([]),_=a({}),L=a(!1),f=a(""),y=a(!0),k=a(!0),$=a(!0),P=a(!0),U=a(!0),C=a(!0),V=a(!0),N=a(!0),x=a(!0),S=a(!0),A=a(!0),M=a(!0),B=a(!0),I=a(0),j=a({client_id:p.value.client_id,orderby:"",order:"",page:1,perPage:z});function H(e){j.value.page=e,F()}const O=()=>{L.value=!1,y.value=!0,k.value=!0,$.value=!0,P.value=!0,U.value=!0,C.value=!0,V.value=!0,N.value=!0,x.value=!0,S.value=!0,A.value=!0,M.value=!0,B.value=!0},R=(e,o)=>{u(!0),g.runPostApi("/change_name",{client_id:p.value.client_id,firstname:e,lastname:o}).then(b=>{u(!1),b.data.result=="success"?(ls().getUser(),m.success("Successfully changed your profile!")):m.warning("Cannot connect to whmcs api.")}).catch(b=>{u(!1),console.log(b)})},F=()=>{u(!0),g.runGetApi("/get-profileData",j.value).then(e=>{u(!1),w.value=e.data.emails,v.value=e.data.users_list,_.value=e.data.clientDetails,I.value=e.data.totalresults}).catch(e=>{u(!1),console.log(e)})},Y=e=>{u(!0),g.runPostApi("/remove_access",{user_id:e}).then(o=>{u(!1),o.data.result=="success"?(v.value=o.data.users_list,m.success("Successfully removed user")):m.warning("Cannot connect to whmcs api.")}).catch(o=>{u(!1),console.log(o)})},J=()=>{u(!0),g.runPostApi("/invite_user",{invite_email:f.value,profile:y.value,contacts:k.value,products:$.value,manageproducts:P.value,productsso:U.value,domains:C.value,managedomains:V.value,invoices:N.value,quotes:x.value,tickets:S.value,affiliates:A.value,emails:M.value,orders:B.value}).then(e=>{u(!1),e.data.result=="success"?m.success("Successfully sent invite to the email address"):m.warning("Cannot connect to whmcs api.")}).catch(e=>{u(!1),console.log(e)})};F();function K(e){return new Date(e).toISOString().slice(0,10)}return(e,o)=>{const b=Z("router-link");return i(),c("section",ds,[s("div",rs,[s("div",cs,[s("div",us,[s("h2",ps,t(e.$t("Settings")),1),_s])]),s("div",ms,[s("div",vs,[s("div",bs,[s("div",hs,[s("ul",gs,[s("li",ws,[s("button",fs,t(e.$t("Your_Profile")),1)]),s("li",ys,[s("button",ks,t(e.$t("Change_Password")),1)]),s("li",$s,[s("button",Ps,t(e.$t("User_Management")),1)]),s("li",Us,[s("button",Cs,t(e.$t("Email_History")),1)])])])]),s("div",Vs,[s("div",Ns,[s("div",xs,[s("div",Ss,[s("h3",As,t(e.$t("Your_Profile")),1)]),Ms,p.value&&p.value.permissions.split(",").includes("profile")?(i(),c("div",Bs,[s("div",Ds,[s("p",Es,t(e.$t("Email")),1),s("div",Ls,[s("div",js,[n(s("input",{type:"text",id:"disabled_email",name:"disabled_email",placeholder:"Email",disabled:"","onUpdate:modelValue":o[0]||(o[0]=l=>_.value.email=l)},null,512),[[D,_.value.email]])])]),s("p",qs,t(e.$t("First_Name")),1),s("div",Is,[s("div",Fs,[n(s("input",{type:"text",id:"firstname",name:"firstname",placeholder:"First Name",required:"","onUpdate:modelValue":o[1]||(o[1]=l=>_.value.firstname=l)},null,512),[[D,_.value.firstname]])])]),s("p",Ts,t(e.$t("Last_Name")),1),s("div",zs,[n(s("input",{type:"text",id:"lastname",name:"lastname",placeholder:"Last Name",required:"","onUpdate:modelValue":o[2]||(o[2]=l=>_.value.lastname=l)},null,512),[[D,_.value.lastname]])]),s("div",Gs,[s("button",{onClick:o[3]||(o[3]=l=>R(_.value.firstname,_.value.lastname)),class:"btn-dark px-4 me-2 hover-dark-light"},t(e.$t("Change_name")),1)])])])):(i(),h(E,{key:1}))])]),s("div",Hs,[s("div",Os,[s("div",Rs,[s("h3",Ys,t(e.$t("Change_Password")),1)]),Js,p.value&&p.value.permissions.split(",").includes("profile")?(i(),c("div",Ks,[s("form",Qs,[s("div",Ws,[s("label",Xs,t(e.$t("Current_Password")),1),Zs]),s("div",se,[s("label",ee,t(e.$t("New_Password")),1),s("div",te,[le,oe,ae,ne,s("div",ie,[s("div",de,[s("span",re,t(e.$t("Password_Rating"))+": 0%",1)])])])]),s("div",ce,[s("label",ue,t(e.$t("Confirm_New_Password")),1),pe]),s("div",_e,[s("div",me,[s("button",ve,t(e.$t("Save_changes")),1)])])])])):(i(),h(E,{key:1}))])]),s("div",be,[p.value&&p.value.permissions.split(",").includes("profile")?(i(),c("div",he,[s("div",ge,[s("h3",we,t(e.$t("User_Management"))+" ("+t(v.value.length)+" "+t(v.value.length===1?"User":"Users")+" "+t(e.$t("found"))+") ",1)]),fe,s("div",ye,[s("div",ke,[s("table",$e,[s("thead",null,[s("tr",null,[s("th",Pe,t(e.$t("Email_Address"))+" / "+t(e.$t("Last_Login")),1),s("th",Ue,t(e.$t("Actions")),1)])]),s("tbody",null,[(i(!0),c(q,null,T(v.value,l=>(i(),c("tr",{key:l.id},[s("td",null,[d(t(l.email)+" ",1),l.is_owner?(i(),c("span",Ce,t(e.$t("Owner")),1)):os("",!0),Ve]),s("td",null,[l.is_owner==!1?(i(),h(b,{key:0,to:{name:"manageUser-detail",params:{id:l.id,email:l.email}}},{default:as(()=>[s("button",{class:"btn btn-dark btn-sm btn-manage-permissions managePermissionBtn",disabled:l.is_owner,style:{"margin-right":"5px"}},t(e.$t("Manage_Permissions")),9,Ne)]),_:2},1032,["to"])):(i(),c("button",{key:1,class:"btn btn-dark btn-sm btn-manage-permissions managePermissionBtn",disabled:l.is_owner,style:{"margin-right":"5px"}},t(e.$t("Manage_Permissions")),9,xe)),s("button",{class:"btn btn-danger btn-sm btn-remove-user",disabled:l.is_owner,onClick:St=>Y(l.id)},t(e.$t("Remove_Access")),9,Se)])]))),128))])])])]),s("div",Ae,[s("h3",Me,t(e.$t("Invite_New_User")),1)]),Be,s("div",De,[s("p",null,t(e.$t("invite_desc")),1),s("div",Ee,[s("div",null,[n(s("input",{type:"email",id:"invite_email",name:"invite_email",placeholder:"Email address to send invite",required:"",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=l=>f.value=l)},null,512),[[D,f.value]])]),s("div",Le,[s("label",je,[s("input",{type:"radio",name:"permissions",value:"all",checked:"checked",onClick:o[5]||(o[5]=l=>O())}),d(" "+t(e.$t("All_Permissions")),1)]),s("label",qe,[s("input",{type:"radio",name:"permissions",value:"choose",onClick:o[6]||(o[6]=l=>L.value=!0)}),d(" "+t(e.$t("Choose_Permissions")),1)]),n(s("div",Ie,[s("label",Fe,[n(s("input",{type:"checkbox",name:"profile","onUpdate:modelValue":o[7]||(o[7]=l=>y.value=l)},null,512),[[r,y.value]]),d(" "+t(e.$t("permission_detail_1")),1)]),Te,s("label",ze,[n(s("input",{type:"checkbox",name:"contacts","onUpdate:modelValue":o[8]||(o[8]=l=>k.value=l)},null,512),[[r,k.value]]),d(" "+t(e.$t("permission_detail_2")),1)]),Ge,s("label",He,[n(s("input",{type:"checkbox",name:"products","onUpdate:modelValue":o[9]||(o[9]=l=>$.value=l)},null,512),[[r,$.value]]),d(" "+t(e.$t("permission_detail_3")),1)]),Oe,s("label",Re,[n(s("input",{type:"checkbox",name:"manageproducts","onUpdate:modelValue":o[10]||(o[10]=l=>P.value=l)},null,512),[[r,P.value]]),d(" "+t(e.$t("permission_detail_4")),1)]),Ye,s("label",Je,[n(s("input",{type:"checkbox",name:"productsso","onUpdate:modelValue":o[11]||(o[11]=l=>U.value=l)},null,512),[[r,U.value]]),d(" "+t(e.$t("permission_detail_5")),1)]),Ke,s("label",Qe,[n(s("input",{type:"checkbox",name:"domains","onUpdate:modelValue":o[12]||(o[12]=l=>C.value=l)},null,512),[[r,C.value]]),d(" "+t(e.$t("permission_detail_6")),1)]),We,s("label",Xe,[n(s("input",{type:"checkbox",name:"managedomains","onUpdate:modelValue":o[13]||(o[13]=l=>V.value=l)},null,512),[[r,V.value]]),d(" "+t(e.$t("permission_detail_7")),1)]),Ze,s("label",st,[n(s("input",{type:"checkbox",name:"invoices","onUpdate:modelValue":o[14]||(o[14]=l=>N.value=l)},null,512),[[r,N.value]]),d(" "+t(e.$t("permission_detail_8")),1)]),et,s("label",tt,[n(s("input",{type:"checkbox",name:"quotes","onUpdate:modelValue":o[15]||(o[15]=l=>x.value=l)},null,512),[[r,x.value]]),d(" "+t(e.$t("permission_detail_9")),1)]),lt,s("label",ot,[n(s("input",{type:"checkbox",name:"tickets","onUpdate:modelValue":o[16]||(o[16]=l=>S.value=l)},null,512),[[r,S.value]]),d(" "+t(e.$t("permission_detail_10")),1)]),at,s("label",nt,[n(s("input",{type:"checkbox",name:"affiliates","onUpdate:modelValue":o[17]||(o[17]=l=>A.value=l)},null,512),[[r,A.value]]),d(" "+t(e.$t("permission_detail_11")),1)]),it,s("label",dt,[n(s("input",{type:"checkbox",name:"emails","onUpdate:modelValue":o[18]||(o[18]=l=>M.value=l)},null,512),[[r,M.value]]),d(" "+t(e.$t("permission_detail_12")),1)]),rt,s("label",ct,[n(s("input",{type:"checkbox",name:"orders","onUpdate:modelValue":o[19]||(o[19]=l=>B.value=l)},null,512),[[r,B.value]]),d(" "+t(e.$t("permission_detail_13")),1)]),ut],512),[[ss,L.value]])]),s("button",{onClick:o[20]||(o[20]=l=>J()),class:"btn btn-dark mt-4",disabled:f.value==""},t(e.$t("Send_Invite")),9,pt)])])])):(i(),h(E,{key:1}))]),s("div",_t,[s("div",mt,[s("div",vt,[s("h3",bt,t(e.$t("Email_History")),1)]),ht,p.value&&p.value.permissions.split(",").includes("emails")?(i(),c(q,{key:0},[s("div",gt,[s("div",wt,[s("table",ft,[s("thead",null,[s("tr",null,[s("th",yt,t(e.$t("ID")),1),s("th",kt,t(e.$t("Date_Sent")),1),s("th",$t,t(e.$t("Message_subject")),1)])]),s("tbody",null,[!w.value||w.value.length===0?(i(),c("tr",Pt,[s("td",Ut,[s("h5",Ct,t(e.$t("No_emails")),1)])])):(i(!0),c(q,{key:1},T(w.value,l=>(i(),c("tr",{key:l.id},[s("td",null,"#"+t(l.id),1),s("td",null,t(K(l.date)),1),s("td",Vt,t(l.subject),1)]))),128))])])])]),s("div",Nt,[es(is,{currentPage:j.value.page,totalPages:Math.ceil(I.value/z),onPageChanged:H},null,8,["currentPage","totalPages"])])],64)):(i(),h(E,{key:1}))])])])])])])])}}};export{Et as default};
