import{u as R,c as Y,k as l,r as G,b as d,d as u,e,w as a,z as D,t as m,F as I,A as L,g as n,v as K,K as i,a as Q,m as J,y as W,l as X}from"./app-1c59e5b4.js";import{c as Z,s as r}from"./loading-f6678eee.js";import{d as ee}from"./theme-sugar-6744922a.js";const se={class:"overview"},te={class:"container"},le=e("div",{class:"d-flex flex-column justify-content-start align-items-start title-button-wrapper"},[e("div",{class:"overview-header"},[e("h2",{class:"title mb-0"},"Settings")])],-1),ae={class:"sub-section overview-tab"},oe={class:"row justify-content-between align-items-center"},ne=e("div",{class:"row mb-2 mb-lg-5 pe-0"},[e("div",{class:"col-md-12 d-flex justify-content-start pe-0 flex-wrap"},[e("ul",{style:{"overflow-x":"unset"},class:"nav nav-pills mb-3 mb-md-0 order-1 order-md-2 mb-lg-0 flex-nowrap",id:"pills-tab",role:"tablist"},[e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link active",id:"pills-overview-tab","data-bs-toggle":"pill","data-bs-target":"#pills-overview",type:"button",role:"tab","aria-controls":"pills-overview","aria-selected":"true"}," Your Profile ")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link",id:"pills-analytics-tab","data-bs-toggle":"pill","data-bs-target":"#pills-analytics",type:"button",role:"tab","aria-controls":"pills-analytics","aria-selected":"false"}," Change Password ")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link",id:"pills-userManagement-tab","data-bs-toggle":"pill","data-bs-target":"#pills-userManagement",type:"button",role:"tab","aria-controls":"pills-userManagement","aria-selected":"false"}," User Management ")]),e("li",{class:"nav-item",role:"presentation"},[e("button",{class:"nav-link",id:"pills-emails-tab","data-bs-toggle":"pill","data-bs-target":"#pills-emails",type:"button",role:"tab","aria-controls":"pills-emails","aria-selected":"false"}," Email History ")])])])],-1),ie={class:"tab-content settings-tab-content",id:"pills-tabContent"},re={class:"tab-pane fade show active",id:"pills-overview",role:"tabpanel","aria-labelledby":"pills-overview-tab"},ce={class:"tab-inner mb-3"},de=e("div",{class:"row"},[e("h3",{class:"title mb-4"},"Your Profile")],-1),ue=e("div",{class:"divider"},null,-1),pe={class:"row px-2 pt-4 px-lg-4 pt-lg-4"},me={class:"col-12 col-lg-6 tab-inner py-0 p-mb-0"},ve=e("p",{class:"fs-13-5"},"Email",-1),be={class:"overview-input mb-4"},_e={class:"d-inline"},ge=e("p",{class:"fs-13-5"},"First Name",-1),he={class:"overview-input mb-4"},we={class:"d-inline"},fe=e("p",{class:"fs-13-5"},"Last Name",-1),ye={class:"overview-input mb-4"},ke={class:"overview-button-wrapper pt-0"},xe=e("div",{class:"tab-pane fade",id:"pills-analytics",role:"tabpanel","aria-labelledby":"pills-analytics-tab"},[e("div",{class:"tab-inner mb-3"},[e("div",{class:"row"},[e("h3",{class:"title mb-4"},"Change Password")]),e("div",{class:"divider"}),e("div",{class:"row px-2 pt-4 px-lg-4 pt-lg-4"},[e("form",{class:"form-horizontal using-password-strength"},[e("div",{id:"currentpwBox",class:"form-group"},[e("label",{for:"currentpw",class:"col-sm-4 control-label"},"Current Password"),e("div",{class:"col-sm-5",style:{position:"relative"}},[e("input",{type:"password",class:"form-control",name:"currentpw",id:"currentpw",autocomplete:"off"}),e("img",{src:"assets/img/eye.svg",class:"settings-password-img icon-password eye-closed"}),e("img",{src:"assets/img/eye-open.svg",class:"settings-password-img icon-password eye-open",style:{display:"none"}}),e("br")])]),e("div",{id:"newPassword1",class:"form-group has-feedback has-success"},[e("label",{for:"inputNewPassword1",class:"col-sm-4 control-label"},"New Password"),e("div",{class:"col-sm-5",style:{position:"relative"}},[e("input",{type:"password",class:"form-control",name:"newpw",id:"inputNewPassword1",autocomplete:"off"}),e("img",{src:"assets/img/eye.svg",class:"settings-password-img icon-password eye-closed"}),e("img",{src:"assets/img/eye-open.svg",class:"settings-password-img icon-password eye-open",style:{display:"none"}}),e("br"),e("div",{class:"progress",id:"passwordStrengthBar"},[e("div",{class:"progress-bar progress-bar-success",role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100",style:{width:"0%"}},[e("span",{class:"sr-only"},"Password Rating: 0%")])])])]),e("div",{id:"newPassword2",class:"form-group has-feedback has-success"},[e("label",{for:"inputNewPassword2",class:"col-sm-4 control-label"},"Confirm New Password"),e("div",{class:"col-sm-5",style:{position:"relative"}},[e("input",{type:"password",class:"form-control",name:"confirmpw",id:"inputNewPassword2",autocomplete:"off"}),e("img",{src:"assets/img/eye.svg",class:"settings-password-img icon-password eye-closed"}),e("img",{src:"assets/img/eye-open.svg",class:"settings-password-img icon-password eye-open",style:{display:"none"}}),e("div",{id:"inputNewPassword2Msg"})])]),e("div",{class:"overview-button-wrapper pt-0 mt-4"},[e("div",{class:"col-sm-5"},[e("button",{id:"submitButton",class:"btn-dark px-4 me-2 hover-dark-light",disabled:"disabled"}," Save changes ")])])])])])],-1),Ve={class:"tab-pane fade",id:"pills-userManagement",role:"tabpanel","aria-labelledby":"pills-userManagement-tab"},Pe={class:"tab-inner mb-3"},Ae={class:"row"},Ue={class:"title mb-4"},Ce=e("div",{class:"divider"},null,-1),Me={class:"row px-2 pt-4 px-lg-4 pt-lg-4"},Se={class:"w-100 mb-5 support-table"},Ne={class:"table"},De=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"Email Address / Last Login"),e("th",{scope:"col"},"Actions")])],-1),Be={key:0,class:"badge bg-info"},Ee=e("br",null,null,-1),Ie=["disabled"],Le=["disabled"],qe=["disabled","onClick"],$e=e("div",{class:"row"},[e("h3",{class:"title mb-4"},"Invite New User")],-1),je=e("div",{class:"divider"},null,-1),Oe={class:"row px-2 pt-4 px-lg-4 pt-lg-4"},Fe=e("p",null," Inviting a new user allows you to invite a new user to your account. If the invitee already has an existing user account, they will be able to access your account using their existing login credentials. If the user does not yet have a user account, they will be able to create one. ",-1),Te={class:"mb-4"},ze={class:"form-group selectBoxes mt-4"},He={class:"radio-inline",style:{"padding-right":"20px"}},Re={class:"radio-inline"},Ye={class:"well",id:"invitePermissions"},Ge={class:"checkbox-inline"},Ke=e("br",null,null,-1),Qe={class:"checkbox-inline"},Je=e("br",null,null,-1),We={class:"checkbox-inline"},Xe=e("br",null,null,-1),Ze={class:"checkbox-inline"},es=e("br",null,null,-1),ss={class:"checkbox-inline"},ts=e("br",null,null,-1),ls={class:"checkbox-inline"},as=e("br",null,null,-1),os={class:"checkbox-inline"},ns=e("br",null,null,-1),is={class:"checkbox-inline"},rs=e("br",null,null,-1),cs={class:"checkbox-inline"},ds=e("br",null,null,-1),us={class:"checkbox-inline"},ps=e("br",null,null,-1),ms={class:"checkbox-inline"},vs=e("br",null,null,-1),bs={class:"checkbox-inline"},_s=e("br",null,null,-1),gs={class:"checkbox-inline"},hs=e("br",null,null,-1),ws=["disabled"],fs={class:"tab-pane fade",id:"pills-emails",role:"tabpanel","aria-labelledby":"pills-emails-tab"},ys={class:"tab-inner mb-3"},ks=e("div",{class:"row"},[e("h3",{class:"title mb-4"},"Email History")],-1),xs=e("div",{class:"divider"},null,-1),Vs={class:"row px-2 pt-4 px-lg-4 pt-lg-4"},Ps={class:"w-100 mb-5 support-table"},As={class:"table"},Us=e("thead",null,[e("tr",null,[e("th",{scope:"col"},"ID"),e("th",{scope:"col"},"Date Sent"),e("th",{scope:"col"},"Message subject")])],-1),Cs={key:0},Ms=e("td",{colspan:"3",style:{"text-align":"center"}},[e("h5",{style:{"margin-top":"20px"}},"No emails")],-1),Ss=[Ms],Ns={class:"date-cell"},qs={__name:"settings",setup(Ds){const p=ee.useToast(),_=Z(),q=R(),E=Y(()=>q.state.auth.user),g=l([]),v=l([]),c=l({}),B=l(!1),h=l(""),w=l(!0),f=l(!0),y=l(!0),k=l(!0),x=l(!0),V=l(!0),P=l(!0),A=l(!0),U=l(!0),C=l(!0),M=l(!0),S=l(!0),N=l(!0),$=l({client_id:E.value.client_id,orderby:"",order:""}),j=()=>{B.value=!1,w.value=!0,f.value=!0,y.value=!0,k.value=!0,x.value=!0,V.value=!0,P.value=!0,A.value=!0,U.value=!0,C.value=!0,M.value=!0,S.value=!0,N.value=!0},O=(o,t)=>{r(!0),_.runPostApi("/change_name",{client_id:E.value.client_id,firstname:o,lastname:t}).then(b=>{r(!1),b.data.result=="success"?(Q().getUser(),p.success("Successfully changed your profile!")):p.warning("Cannot connect to whmcs api.")}).catch(b=>{r(!1),console.log(b)})},F=()=>{r(!0),_.runGetApi("/get-profileData",$.value).then(o=>{r(!1),g.value=o.data.emailsList,v.value=o.data.users_list,c.value=o.data.clientDetails}).catch(o=>{r(!1),console.log(o)})},T=o=>{r(!0),_.runPostApi("/remove_access",{user_id:o}).then(t=>{r(!1),t.data.result=="success"?(v.value=t.data.users_list,p.success("Successfully removed user")):p.warning("Cannot connect to whmcs api.")}).catch(t=>{r(!1),console.log(t)})},z=()=>{r(!0),_.runPostApi("/invite_user",{invite_email:h.value,profile:w.value,contacts:f.value,products:y.value,manageproducts:k.value,productsso:x.value,domains:V.value,managedomains:P.value,invoices:A.value,quotes:U.value,tickets:C.value,affiliates:M.value,emails:S.value,orders:N.value}).then(o=>{r(!1),o.data.result=="success"?p.success("Successfully sent invite to the email address"):p.warning("Cannot connect to whmcs api.")}).catch(o=>{r(!1),console.log(o)})};F();function H(o){return new Date(o).toISOString().slice(0,10)}return(o,t)=>{const b=G("router-link");return d(),u("section",se,[e("div",te,[le,e("div",ae,[e("div",oe,[ne,e("div",ie,[e("div",re,[e("div",ce,[de,ue,e("div",pe,[e("div",me,[ve,e("div",be,[e("div",_e,[a(e("input",{type:"text",id:"disabled_email",name:"disabled_email",placeholder:"Email",disabled:"","onUpdate:modelValue":t[0]||(t[0]=s=>c.value.email=s)},null,512),[[D,c.value.email]])])]),ge,e("div",he,[e("div",we,[a(e("input",{type:"text",id:"firstname",name:"firstname",placeholder:"First Name",required:"","onUpdate:modelValue":t[1]||(t[1]=s=>c.value.firstname=s)},null,512),[[D,c.value.firstname]])])]),fe,e("div",ye,[a(e("input",{type:"text",id:"lastname",name:"lastname",placeholder:"Last Name",required:"","onUpdate:modelValue":t[2]||(t[2]=s=>c.value.lastname=s)},null,512),[[D,c.value.lastname]])]),e("div",ke,[e("button",{onClick:t[3]||(t[3]=s=>O(c.value.firstname,c.value.lastname)),class:"btn-dark px-4 me-2 hover-dark-light"}," Change name ")])])])])]),xe,e("div",Ve,[e("div",Pe,[e("div",Ae,[e("h3",Ue," User Management ("+m(v.value.length)+" "+m(v.value.length===1?"User":"Users")+" found) ",1)]),Ce,e("div",Me,[e("div",Se,[e("table",Ne,[De,e("tbody",null,[(d(!0),u(I,null,L(v.value,s=>(d(),u("tr",{key:s.id},[e("td",null,[n(m(s.email)+" ",1),s.is_owner?(d(),u("span",Be,"Owner")):J("",!0),Ee]),e("td",null,[s.is_owner==!1?(d(),W(b,{key:0,to:{name:"manageUser-detail",params:{id:s.id,email:s.email}}},{default:X(()=>[e("button",{class:"btn btn-dark btn-sm btn-manage-permissions managePermissionBtn",disabled:s.is_owner,style:{"margin-right":"5px"}}," Manage Permissions ",8,Ie)]),_:2},1032,["to"])):(d(),u("button",{key:1,class:"btn btn-dark btn-sm btn-manage-permissions managePermissionBtn",disabled:s.is_owner,style:{"margin-right":"5px"}}," Manage Permissions ",8,Le)),e("button",{class:"btn btn-danger btn-sm btn-remove-user",disabled:s.is_owner,onClick:Bs=>T(s.id)}," Remove Access ",8,qe)])]))),128))])])])]),$e,je,e("div",Oe,[Fe,e("div",Te,[e("div",null,[a(e("input",{type:"email",id:"invite_email",name:"invite_email",placeholder:"Email address to send invite",required:"",class:"form-control","onUpdate:modelValue":t[4]||(t[4]=s=>h.value=s)},null,512),[[D,h.value]])]),e("div",ze,[e("label",He,[e("input",{type:"radio",name:"permissions",value:"all",checked:"checked",onClick:t[5]||(t[5]=s=>j())}),n(" All Permissions ")]),e("label",Re,[e("input",{type:"radio",name:"permissions",value:"choose",onClick:t[6]||(t[6]=s=>B.value=!0)}),n(" Choose Permissions ")]),a(e("div",Ye,[e("label",Ge,[a(e("input",{type:"checkbox",name:"profile","onUpdate:modelValue":t[7]||(t[7]=s=>w.value=s)},null,512),[[i,w.value]]),n(" Modify Master Account Profile - Access and modify the client profile information ")]),Ke,e("label",Qe,[a(e("input",{type:"checkbox",name:"contacts","onUpdate:modelValue":t[8]||(t[8]=s=>f.value=s)},null,512),[[i,f.value]]),n(" View & Manage Contacts - Access and manage contacts ")]),Je,e("label",We,[a(e("input",{type:"checkbox",name:"products","onUpdate:modelValue":t[9]||(t[9]=s=>y.value=s)},null,512),[[i,y.value]]),n(" View Products & Services - View access to products, services and addons ")]),Xe,e("label",Ze,[a(e("input",{type:"checkbox",name:"manageproducts","onUpdate:modelValue":t[10]||(t[10]=s=>k.value=s)},null,512),[[i,k.value]]),n(" View & Modify Product Passwords - Allow password resets and other actions ")]),es,e("label",ss,[a(e("input",{type:"checkbox",name:"productsso","onUpdate:modelValue":t[11]||(t[11]=s=>x.value=s)},null,512),[[i,x.value]]),n(" Perform Single Sign-On - Allow single sign-on into services ")]),ts,e("label",ls,[a(e("input",{type:"checkbox",name:"domains","onUpdate:modelValue":t[12]||(t[12]=s=>V.value=s)},null,512),[[i,V.value]]),n(" View Domains - View access to domain registrations ")]),as,e("label",os,[a(e("input",{type:"checkbox",name:"managedomains","onUpdate:modelValue":t[13]||(t[13]=s=>P.value=s)},null,512),[[i,P.value]]),n(" Manage Domain Settings - Allow domain management eg. nameservers/whois/transfers ")]),ns,e("label",is,[a(e("input",{type:"checkbox",name:"invoices","onUpdate:modelValue":t[14]||(t[14]=s=>A.value=s)},null,512),[[i,A.value]]),n(" View & Pay Invoices - View and payment access to invoices ")]),rs,e("label",cs,[a(e("input",{type:"checkbox",name:"quotes","onUpdate:modelValue":t[15]||(t[15]=s=>U.value=s)},null,512),[[i,U.value]]),n(" View & Accept Quotes - View and acceptance permissions for quotes ")]),ds,e("label",us,[a(e("input",{type:"checkbox",name:"tickets","onUpdate:modelValue":t[16]||(t[16]=s=>C.value=s)},null,512),[[i,C.value]]),n(" View & Open Support Tickets - Access to open, respond and manage support tickets ")]),ps,e("label",ms,[a(e("input",{type:"checkbox",name:"affiliates","onUpdate:modelValue":t[17]||(t[17]=s=>M.value=s)},null,512),[[i,M.value]]),n(" View & Manage Affiliate Account - Access to view and request withdrawals ")]),vs,e("label",bs,[a(e("input",{type:"checkbox",name:"emails","onUpdate:modelValue":t[18]||(t[18]=s=>S.value=s)},null,512),[[i,S.value]]),n(" View Emails - Access to view account email history ")]),_s,e("label",gs,[a(e("input",{type:"checkbox",name:"orders","onUpdate:modelValue":t[19]||(t[19]=s=>N.value=s)},null,512),[[i,N.value]]),n(" Place New Orders/Upgrades/Cancellations - Allow placing of new orders ")]),hs],512),[[K,B.value]])]),e("button",{onClick:t[20]||(t[20]=s=>z()),class:"btn btn-dark mt-4",disabled:h.value==""}," Send Invite ",8,ws)])])])]),e("div",fs,[e("div",ys,[ks,xs,e("div",Vs,[e("div",Ps,[e("table",As,[Us,e("tbody",null,[!g.value||g.value.length===0?(d(),u("tr",Cs,Ss)):(d(!0),u(I,{key:1},L(g.value,s=>(d(),u("tr",{key:s.id},[e("td",null,"#"+m(s.id),1),e("td",null,m(H(s.date)),1),e("td",Ns,m(s.subject),1)]))),128))])])])])])])])])])])])}}};export{qs as default};
