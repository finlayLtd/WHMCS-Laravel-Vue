import{k as a,u as F,c as _,r as R,b as n,d as i,e as t,h as g,l as P,m as M,F as S,A as x,g as A,t as d,n as q}from"./app-c4a345d8.js";import{_ as z}from"./services-e5f124d4.js";import{c as E,s as T}from"./loading-8c6d7625.js";import{P as G}from"./Pagination-759b1122.js";import"./theme-sugar-eadf48c4.js";const H={class:"dashboard"},J={class:"container"},K={class:"d-flex justify-content-between align-items-center title-button-wrapper position-relative"},Q=t("h2",{class:"title mb-0"},"Dashboard",-1),U=t("button",{type:"submit",class:"btn btn-dark btn-chevron chevron-dark hover-dark-light options-toggle dropdown-toggle","data-bs-toggle":"dropdown"}," Create Server ",-1),W={class:"options-toggle-dropdown create-server dropdown-menu dropdown-menu-end"},X={class:"sub-section server-list-tab"},Y={class:"row justify-content-between align-items-center"},Z={class:"col-md-12"},tt={class:"w-100 mb-2 mb-lg-5"},et=t("h3",{class:"sub-title"},"Support Tickets",-1),st={style:{display:"flex","justify-content":"space-between"}},lt={class:"sort-servers order-2 order-md-1"},ot=t("span",null,"Sort by...",-1),at=[ot],nt={key:0,class:"sorting-items"},it={class:"nav nav-pills mb-3 mb-md-0 order-1 order-md-2 mb-lg-0",id:"pills-tab",role:"tablist"},rt={class:"nav-item",role:"presentation"},ct=["id","data-bs-target","aria-controls","onClick"],dt={class:"w-100 support-table mb-4"},ut={class:"table"},pt=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"Ticket No"),t("th",{scope:"col"},"Title"),t("th",{scope:"col"},"Priority"),t("th",{scope:"col"},"Date"),t("th",{scope:"col"},"Status")])],-1),vt={key:0},_t=t("td",{colspan:"5",style:{"text-align":"center"}},[t("h5",{style:{"margin-top":"20px"}},"No tickets")],-1),gt=[_t],mt={class:"refund-request"},ht={class:"date-cell"},bt={class:"w-100 server-list-pagination"},m=8,St={__name:"dashboard",setup(ft){const $=E(),p=a(!1),L=F(),b=_(()=>L.state.auth.user),u=a([]),f=a([]),N=a(0),r=a("All"),B=a(["All","Open","Answered","Customer-Reply","Closed"]);console.log(b.value.client_id);const c=a({client_id:b.value.client_id,orderby:"",order:"",page:1}),k=()=>{T(!0),$.runGetApi("/support-ticket",c.value).then(e=>{T(!1),p.value=!1,console.log(e.data),u.value=e.data.tickets;const l=_(()=>{var s,h;return(h=(s=e==null?void 0:e.data)==null?void 0:s.status)==null?void 0:h.filter(O=>B.value.includes(O.title))});console.log("filteredStatus",l.value),f.value=l.value;const o=e.data.totalTickets;N.value=Math.ceil(o/m)}).catch(e=>{console.log(e)})};k();function D(e){c.value.page=e}function y(e){return`pills-${C(e)}`}function V(e){return`pills-${C(e)}-tab`}function C(e){return e.toLowerCase().replace(/ /g,"-")}function v(e,l){c.value.orderby=e,c.value.order=l,k()}function j(e){return e=="Answered"?"successful-cell":e=="Closed"?"cancelled-cell":"in-progress-cell"}const w=a([]),I=_(()=>{let e;r.value==="All"?e=u.value:e=u.value.filter(o=>o.status===r.value);const l=_(()=>{const o=(c.value.page-1)*m,s=o+m;return e.slice(o,s)});return w.value[r.value]=Math.ceil(e.length/m),l.value});return(e,l)=>{const o=R("router-link");return n(),i("section",H,[t("div",J,[t("div",K,[Q,U,t("div",W,[t("ul",null,[t("li",null,[g(o,{to:"/create-vps-server"},{default:P(()=>[A("Create VPS Server")]),_:1})])])])]),t("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[et,t("div",st,[t("div",lt,[t("div",{id:"toggleButton",class:"sort-item-active btn-chevron chevron-dark",style:{width:"160px"},onClick:l[0]||(l[0]=s=>p.value=!p.value)},at),p.value?(n(),i("div",nt,[t("ul",null,[t("li",{class:"touch-item",onClick:l[1]||(l[1]=s=>v("date","desc"))}," Opened-latest "),t("li",{class:"touch-item",onClick:l[2]||(l[2]=s=>v("date","asc"))}," Opened-oldest "),t("li",{class:"touch-item",onClick:l[3]||(l[3]=s=>v("lastreply","desc"))}," Last-Reply-latest "),t("li",{class:"touch-item",onClick:l[4]||(l[4]=s=>v("date","asc"))}," Last-Reply-oldest ")])])):M("",!0)]),t("ul",it,[t("li",rt,[t("button",{class:"nav-link active",id:"pills-all-tab","data-bs-toggle":"pill","data-bs-target":"#pills-all",type:"button",role:"tab","aria-controls":"pills-all","aria-selected":"true",onClick:l[5]||(l[5]=s=>r.value="All")}," All ")]),(n(!0),i(S,null,x(f.value,s=>(n(),i("li",{key:s.title,class:"nav-item",role:"presentation"},[t("button",{id:V(s.title),class:"nav-link","data-bs-toggle":"pill","data-bs-target":"#"+y(s.title),type:"button",role:"tab","aria-controls":y(s.title),"aria-selected":!1,onClick:h=>r.value=s.title},d(s.title),9,ct)]))),128))])])]),t("div",dt,[t("table",ut,[pt,t("tbody",null,[!u.value||u.value.length===0?(n(),i("tr",vt,gt)):(n(!0),i(S,{key:1},x(I.value,s=>(n(),i("tr",{key:s.id},[t("td",null,[g(o,{to:{name:"ticket-detail",params:{id:s.id}}},{default:P(()=>[A(" #"+d(s.tid),1)]),_:2},1032,["to"])]),t("td",null,d(s.subject),1),t("td",mt,d(s.priority),1),t("td",ht,d(s.date),1),t("td",{class:q(j(s.status))},[t("span",null,d(s.status),1)],2)]))),128))])])]),t("div",bt,[g(G,{currentPage:c.value.page,totalPages:w.value[r.value],onPageChanged:D},null,8,["currentPage","totalPages"])])])])]),g(z)])])}}};export{St as default};
