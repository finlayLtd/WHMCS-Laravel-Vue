import{A as K,b as Q,d as j,f as a,r as W,o as u,c as p,h as s,t,w as n,B as M,F as q,s as F,j as i,v as X,E as d,a as Z,y as ss,z as r,e as es,l as ts,G as ls,i as os}from"./app-5f59d904.js";import{c as as}from"./commonApis-4afe13c5.js";import{P as ns}from"./Pagination-4fa1b581.js";const is={class:"overview"},ds={class:"container"},rs={class:"d-flex flex-column justify-content-start align-items-start title-button-wrapper"},cs={class:"overview-header"},us={class:"title mb-0"},ps={class:"sub-section overview-tab"},_s={class:"row justify-content-between align-items-center"},ms={class:"row mb-2 mb-lg-5 pe-0"},vs={class:"col-md-12 d-flex justify-content-start pe-0 flex-wrap"},bs={style:{"overflow-x":"unset"},class:"nav nav-pills mb-3 mb-md-0 order-1 order-md-2 mb-lg-0 flex-nowrap",id:"pills-tab",role:"tablist"},hs={class:"nav-item",role:"presentation"},gs={class:"nav-link active",id:"pills-overview-tab","data-bs-toggle":"pill","data-bs-target":"#pills-overview",type:"button",role:"tab","aria-controls":"pills-overview","aria-selected":"true"},ws={class:"nav-item",role:"presentation"},fs={class:"nav-link",id:"pills-analytics-tab","data-bs-toggle":"pill","data-bs-target":"#pills-analytics",type:"button",role:"tab","aria-controls":"pills-analytics","aria-selected":"false"},ys={class:"nav-item",role:"presentation"},ks={class:"nav-link",id:"pills-userManagement-tab","data-bs-toggle":"pill","data-bs-target":"#pills-userManagement",type:"button",role:"tab","aria-controls":"pills-userManagement","aria-selected":"false"},$s={class:"nav-item",role:"presentation"},Ps={class:"nav-link",id:"pills-emails-tab","data-bs-toggle":"pill","data-bs-target":"#pills-emails",type:"button",role:"tab","aria-controls":"pills-emails","aria-selected":"false"},Us={class:"tab-content settings-tab-content",id:"pills-tabContent"},Vs={class:"tab-pane fade show active",id:"pills-overview",role:"tabpanel","aria-labelledby":"pills-overview-tab"},Cs={class:"tab-inner mb-3"},Ns={class:"row"},xs={class:"title mb-4"},Ss=s("div",{class:"divider"},null,-1),As={class:"row px-2 pt-4 px-lg-4 pt-lg-4"},Ms={class:"col-12 col-lg-6 tab-inner py-0 p-mb-0"},Bs={class:"fs-13-5"},Ds={class:"overview-input mb-4"},Es={class:"d-inline"},Ls={class:"fs-13-5"},Is={class:"overview-input mb-4"},js={class:"d-inline"},qs={class:"fs-13-5"},Fs={class:"overview-input mb-4"},Ts={class:"overview-button-wrapper pt-0"},zs={class:"tab-pane fade",id:"pills-analytics",role:"tabpanel","aria-labelledby":"pills-analytics-tab"},Gs={class:"tab-inner mb-3"},Hs={class:"row"},Os={class:"title mb-4"},Rs=s("div",{class:"divider"},null,-1),Ys={class:"row px-2 pt-4 px-lg-4 pt-lg-4"},Js={class:"form-horizontal using-password-strength"},Ks={id:"currentpwBox",class:"form-group"},Qs={for:"currentpw",class:"col-sm-4 control-label"},Ws=s("div",{class:"col-sm-5",style:{position:"relative"}},[s("input",{type:"password",class:"form-control",name:"currentpw",id:"currentpw",autocomplete:"off"}),s("img",{src:"assets/img/eye.svg",class:"settings-password-img icon-password eye-closed"}),s("img",{src:"assets/img/eye-open.svg",class:"settings-password-img icon-password eye-open",style:{display:"none"}}),s("br")],-1),Xs={id:"newPassword1",class:"form-group has-feedback has-success"},Zs={for:"inputNewPassword1",class:"col-sm-4 control-label"},se={class:"col-sm-5",style:{position:"relative"}},ee=s("input",{type:"password",class:"form-control",name:"newpw",id:"inputNewPassword1",autocomplete:"off"},null,-1),te=s("img",{src:"assets/img/eye.svg",class:"settings-password-img icon-password eye-closed"},null,-1),le=s("img",{src:"assets/img/eye-open.svg",class:"settings-password-img icon-password eye-open",style:{display:"none"}},null,-1),oe=s("br",null,null,-1),ae={class:"progress",id:"passwordStrengthBar"},ne={class:"progress-bar progress-bar-success",role:"progressbar","aria-valuenow":"0","aria-valuemin":"0","aria-valuemax":"100",style:{width:"0%"}},ie={class:"sr-only"},de={id:"newPassword2",class:"form-group has-feedback has-success"},re={for:"inputNewPassword2",class:"col-sm-4 control-label"},ce=ss('<div class="col-sm-5" style="position:relative;"><input type="password" class="form-control" name="confirmpw" id="inputNewPassword2" autocomplete="off"><img src="assets/img/eye.svg" class="settings-password-img icon-password eye-closed"><img src="assets/img/eye-open.svg" class="settings-password-img icon-password eye-open" style="display:none;"><div id="inputNewPassword2Msg"></div></div>',1),ue={class:"overview-button-wrapper pt-0 mt-4"},pe={class:"col-sm-5"},_e={id:"submitButton",class:"btn-dark px-4 me-2 hover-dark-light",disabled:"disabled"},me={class:"tab-pane fade",id:"pills-userManagement",role:"tabpanel","aria-labelledby":"pills-userManagement-tab"},ve={class:"tab-inner mb-3"},be={class:"row"},he={class:"title mb-4"},ge=s("div",{class:"divider"},null,-1),we={class:"row px-2 pt-4 px-lg-4 pt-lg-4"},fe={class:"w-100 mb-5 support-table"},ye={class:"table"},ke={scope:"col"},$e={scope:"col"},Pe={key:0,class:"badge bg-info"},Ue=s("br",null,null,-1),Ve=["disabled"],Ce=["disabled"],Ne=["disabled","onClick"],xe={class:"row"},Se={class:"title mb-4"},Ae=s("div",{class:"divider"},null,-1),Me={class:"row px-2 pt-4 px-lg-4 pt-lg-4"},Be={class:"mb-4"},De={class:"form-group selectBoxes mt-4"},Ee={class:"radio-inline",style:{"padding-right":"20px"}},Le={class:"radio-inline"},Ie={class:"well",id:"invitePermissions"},je={class:"checkbox-inline"},qe=s("br",null,null,-1),Fe={class:"checkbox-inline"},Te=s("br",null,null,-1),ze={class:"checkbox-inline"},Ge=s("br",null,null,-1),He={class:"checkbox-inline"},Oe=s("br",null,null,-1),Re={class:"checkbox-inline"},Ye=s("br",null,null,-1),Je={class:"checkbox-inline"},Ke=s("br",null,null,-1),Qe={class:"checkbox-inline"},We=s("br",null,null,-1),Xe={class:"checkbox-inline"},Ze=s("br",null,null,-1),st={class:"checkbox-inline"},et=s("br",null,null,-1),tt={class:"checkbox-inline"},lt=s("br",null,null,-1),ot={class:"checkbox-inline"},at=s("br",null,null,-1),nt={class:"checkbox-inline"},it=s("br",null,null,-1),dt={class:"checkbox-inline"},rt=s("br",null,null,-1),ct=["disabled"],ut={class:"tab-pane fade",id:"pills-emails",role:"tabpanel","aria-labelledby":"pills-emails-tab"},pt={class:"tab-inner mb-3"},_t={class:"row"},mt={class:"title mb-4"},vt=s("div",{class:"divider"},null,-1),bt={class:"row px-2 pt-4 px-lg-4 pt-lg-4"},ht={class:"w-100 mb-5 support-table"},gt={class:"table"},wt={scope:"col"},ft={scope:"col"},yt={scope:"col"},kt={key:0},$t={colspan:"3",style:{"text-align":"center"}},Pt={style:{"margin-top":"20px"}},Ut={class:"date-cell"},Vt={class:"w-100 server-list-pagination"},L=15,Mt={__name:"settings",setup(Ct){const _=K.useToast(),b=as(),T=Q(),I=j(()=>T.state.auth.user),B=a([]),m=a([]),c=a({}),D=a(!1),h=a(""),g=a(!0),w=a(!0),f=a(!0),y=a(!0),k=a(!0),$=a(!0),P=a(!0),U=a(!0),V=a(!0),C=a(!0),N=a(!0),x=a(!0),S=a(!0),A=a({client_id:I.value.client_id,orderby:"",order:"",page:1});function z(e){A.value.page=e}const E=j(()=>{const e=(A.value.page-1)*L,o=e+L;return B.value.slice(e,o)}),G=()=>{D.value=!1,g.value=!0,w.value=!0,f.value=!0,y.value=!0,k.value=!0,$.value=!0,P.value=!0,U.value=!0,V.value=!0,C.value=!0,N.value=!0,x.value=!0,S.value=!0},H=(e,o)=>{r(!0),b.runPostApi("/change_name",{client_id:I.value.client_id,firstname:e,lastname:o}).then(v=>{r(!1),v.data.result=="success"?(es().getUser(),_.success("Successfully changed your profile!")):_.warning("Cannot connect to whmcs api.")}).catch(v=>{r(!1),console.log(v)})},O=()=>{r(!0),b.runGetApi("/get-profileData",A.value).then(e=>{r(!1),B.value=e.data.emails,m.value=e.data.users_list,c.value=e.data.clientDetails}).catch(e=>{r(!1),console.log(e)})},R=e=>{r(!0),b.runPostApi("/remove_access",{user_id:e}).then(o=>{r(!1),o.data.result=="success"?(m.value=o.data.users_list,_.success("Successfully removed user")):_.warning("Cannot connect to whmcs api.")}).catch(o=>{r(!1),console.log(o)})},Y=()=>{r(!0),b.runPostApi("/invite_user",{invite_email:h.value,profile:g.value,contacts:w.value,products:f.value,manageproducts:y.value,productsso:k.value,domains:$.value,managedomains:P.value,invoices:U.value,quotes:V.value,tickets:C.value,affiliates:N.value,emails:x.value,orders:S.value}).then(e=>{r(!1),e.data.result=="success"?_.success("Successfully sent invite to the email address"):_.warning("Cannot connect to whmcs api.")}).catch(e=>{r(!1),console.log(e)})};O();function J(e){return new Date(e).toISOString().slice(0,10)}return(e,o)=>{const v=W("router-link");return u(),p("section",is,[s("div",ds,[s("div",rs,[s("div",cs,[s("h2",us,t(e.$t("Settings")),1)])]),s("div",ps,[s("div",_s,[s("div",ms,[s("div",vs,[s("ul",bs,[s("li",hs,[s("button",gs,t(e.$t("Your_Profile")),1)]),s("li",ws,[s("button",fs,t(e.$t("Change_Password")),1)]),s("li",ys,[s("button",ks,t(e.$t("User_Management")),1)]),s("li",$s,[s("button",Ps,t(e.$t("Email_History")),1)])])])]),s("div",Us,[s("div",Vs,[s("div",Cs,[s("div",Ns,[s("h3",xs,t(e.$t("Your_Profile")),1)]),Ss,s("div",As,[s("div",Ms,[s("p",Bs,t(e.$t("Email")),1),s("div",Ds,[s("div",Es,[n(s("input",{type:"text",id:"disabled_email",name:"disabled_email",placeholder:"Email",disabled:"","onUpdate:modelValue":o[0]||(o[0]=l=>c.value.email=l)},null,512),[[M,c.value.email]])])]),s("p",Ls,t(e.$t("First_Name")),1),s("div",Is,[s("div",js,[n(s("input",{type:"text",id:"firstname",name:"firstname",placeholder:"First Name",required:"","onUpdate:modelValue":o[1]||(o[1]=l=>c.value.firstname=l)},null,512),[[M,c.value.firstname]])])]),s("p",qs,t(e.$t("Last_Name")),1),s("div",Fs,[n(s("input",{type:"text",id:"lastname",name:"lastname",placeholder:"Last Name",required:"","onUpdate:modelValue":o[2]||(o[2]=l=>c.value.lastname=l)},null,512),[[M,c.value.lastname]])]),s("div",Ts,[s("button",{onClick:o[3]||(o[3]=l=>H(c.value.firstname,c.value.lastname)),class:"btn-dark px-4 me-2 hover-dark-light"},t(e.$t("Change_name")),1)])])])])]),s("div",zs,[s("div",Gs,[s("div",Hs,[s("h3",Os,t(e.$t("Change_Password")),1)]),Rs,s("div",Ys,[s("form",Js,[s("div",Ks,[s("label",Qs,t(e.$t("Current_Password")),1),Ws]),s("div",Xs,[s("label",Zs,t(e.$t("New_Password")),1),s("div",se,[ee,te,le,oe,s("div",ae,[s("div",ne,[s("span",ie,t(e.$t("Password_Rating"))+": 0%",1)])])])]),s("div",de,[s("label",re,t(e.$t("Confirm_New_Password")),1),ce]),s("div",ue,[s("div",pe,[s("button",_e,t(e.$t("Save_changes")),1)])])])])])]),s("div",me,[s("div",ve,[s("div",be,[s("h3",he,t(e.$t("User_Management"))+" ("+t(m.value.length)+" "+t(m.value.length===1?"User":"Users")+" "+t(e.$t("found"))+") ",1)]),ge,s("div",we,[s("div",fe,[s("table",ye,[s("thead",null,[s("tr",null,[s("th",ke,t(e.$t("Email_Address"))+" / "+t(e.$t("Last_Login")),1),s("th",$e,t(e.$t("Actions")),1)])]),s("tbody",null,[(u(!0),p(q,null,F(m.value,l=>(u(),p("tr",{key:l.id},[s("td",null,[i(t(l.email)+" ",1),l.is_owner?(u(),p("span",Pe,t(e.$t("Owner")),1)):ts("",!0),Ue]),s("td",null,[l.is_owner==!1?(u(),ls(v,{key:0,to:{name:"manageUser-detail",params:{id:l.id,email:l.email}}},{default:os(()=>[s("button",{class:"btn btn-dark btn-sm btn-manage-permissions managePermissionBtn",disabled:l.is_owner,style:{"margin-right":"5px"}},t(e.$t("Manage_Permissions")),9,Ve)]),_:2},1032,["to"])):(u(),p("button",{key:1,class:"btn btn-dark btn-sm btn-manage-permissions managePermissionBtn",disabled:l.is_owner,style:{"margin-right":"5px"}},t(e.$t("Manage_Permissions")),9,Ce)),s("button",{class:"btn btn-danger btn-sm btn-remove-user",disabled:l.is_owner,onClick:Nt=>R(l.id)},t(e.$t("Remove_Access")),9,Ne)])]))),128))])])])]),s("div",xe,[s("h3",Se,t(e.$t("Invite_New_User")),1)]),Ae,s("div",Me,[s("p",null,t(e.$t("invite_desc")),1),s("div",Be,[s("div",null,[n(s("input",{type:"email",id:"invite_email",name:"invite_email",placeholder:"Email address to send invite",required:"",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=l=>h.value=l)},null,512),[[M,h.value]])]),s("div",De,[s("label",Ee,[s("input",{type:"radio",name:"permissions",value:"all",checked:"checked",onClick:o[5]||(o[5]=l=>G())}),i(" "+t(e.$t("All_Permissions")),1)]),s("label",Le,[s("input",{type:"radio",name:"permissions",value:"choose",onClick:o[6]||(o[6]=l=>D.value=!0)}),i(" "+t(e.$t("Choose_Permissions")),1)]),n(s("div",Ie,[s("label",je,[n(s("input",{type:"checkbox",name:"profile","onUpdate:modelValue":o[7]||(o[7]=l=>g.value=l)},null,512),[[d,g.value]]),i(" "+t(e.$t("permission_detail_1")),1)]),qe,s("label",Fe,[n(s("input",{type:"checkbox",name:"contacts","onUpdate:modelValue":o[8]||(o[8]=l=>w.value=l)},null,512),[[d,w.value]]),i(" "+t(e.$t("permission_detail_2")),1)]),Te,s("label",ze,[n(s("input",{type:"checkbox",name:"products","onUpdate:modelValue":o[9]||(o[9]=l=>f.value=l)},null,512),[[d,f.value]]),i(" "+t(e.$t("permission_detail_3")),1)]),Ge,s("label",He,[n(s("input",{type:"checkbox",name:"manageproducts","onUpdate:modelValue":o[10]||(o[10]=l=>y.value=l)},null,512),[[d,y.value]]),i(" "+t(e.$t("permission_detail_4")),1)]),Oe,s("label",Re,[n(s("input",{type:"checkbox",name:"productsso","onUpdate:modelValue":o[11]||(o[11]=l=>k.value=l)},null,512),[[d,k.value]]),i(" "+t(e.$t("permission_detail_5")),1)]),Ye,s("label",Je,[n(s("input",{type:"checkbox",name:"domains","onUpdate:modelValue":o[12]||(o[12]=l=>$.value=l)},null,512),[[d,$.value]]),i(" "+t(e.$t("permission_detail_6")),1)]),Ke,s("label",Qe,[n(s("input",{type:"checkbox",name:"managedomains","onUpdate:modelValue":o[13]||(o[13]=l=>P.value=l)},null,512),[[d,P.value]]),i(" "+t(e.$t("permission_detail_7")),1)]),We,s("label",Xe,[n(s("input",{type:"checkbox",name:"invoices","onUpdate:modelValue":o[14]||(o[14]=l=>U.value=l)},null,512),[[d,U.value]]),i(" "+t(e.$t("permission_detail_8")),1)]),Ze,s("label",st,[n(s("input",{type:"checkbox",name:"quotes","onUpdate:modelValue":o[15]||(o[15]=l=>V.value=l)},null,512),[[d,V.value]]),i(" "+t(e.$t("permission_detail_9")),1)]),et,s("label",tt,[n(s("input",{type:"checkbox",name:"tickets","onUpdate:modelValue":o[16]||(o[16]=l=>C.value=l)},null,512),[[d,C.value]]),i(" "+t(e.$t("permission_detail_10")),1)]),lt,s("label",ot,[n(s("input",{type:"checkbox",name:"affiliates","onUpdate:modelValue":o[17]||(o[17]=l=>N.value=l)},null,512),[[d,N.value]]),i(" "+t(e.$t("permission_detail_11")),1)]),at,s("label",nt,[n(s("input",{type:"checkbox",name:"emails","onUpdate:modelValue":o[18]||(o[18]=l=>x.value=l)},null,512),[[d,x.value]]),i(" "+t(e.$t("permission_detail_12")),1)]),it,s("label",dt,[n(s("input",{type:"checkbox",name:"orders","onUpdate:modelValue":o[19]||(o[19]=l=>S.value=l)},null,512),[[d,S.value]]),i(" "+t(e.$t("permission_detail_13")),1)]),rt],512),[[X,D.value]])]),s("button",{onClick:o[20]||(o[20]=l=>Y()),class:"btn btn-dark mt-4",disabled:h.value==""},t(e.$t("Send_Invite")),9,ct)])])])]),s("div",ut,[s("div",pt,[s("div",_t,[s("h3",mt,t(e.$t("Email_History")),1)]),vt,s("div",bt,[s("div",ht,[s("table",gt,[s("thead",null,[s("tr",null,[s("th",wt,t(e.$t("ID")),1),s("th",ft,t(e.$t("Date_Sent")),1),s("th",yt,t(e.$t("Message subject")),1)])]),s("tbody",null,[!E.value||E.value.length===0?(u(),p("tr",kt,[s("td",$t,[s("h5",Pt,t(e.$t("No_emails")),1)])])):(u(!0),p(q,{key:1},F(E.value,l=>(u(),p("tr",{key:l.id},[s("td",null,"#"+t(l.id),1),s("td",null,t(J(l.date)),1),s("td",Ut,t(l.subject),1)]))),128))])])])]),s("div",Vt,[Z(ns,{currentPage:A.value.page,totalPages:Math.ceil(B.value.length/L),onPageChanged:z},null,8,["currentPage","totalPages"])])])])])])])])])}}};export{Mt as default};
