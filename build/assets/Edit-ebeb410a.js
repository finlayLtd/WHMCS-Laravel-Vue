import{C as T,D as U,o as N,E as R,r as j,b as o,d as n,e as t,B as z,w as v,z as x,t as l,f as a,F as c,A as u,h as A,v as G}from"./app-c4a345d8.js";import{u as H}from"./categories-3c63db79.js";import{u as I}from"./posts-3f4781db.js";import{d as V,u as J,a as p,r as K,m as O}from"./rules-54890b8d.js";const Q={class:"row justify-content-center my-5"},W={class:"col-md-6"},X={class:"card border-0 shadow-sm"},Y={class:"card-body"},Z=["onSubmit"],$={class:"mb-3"},tt=t("label",{for:"post-title",class:"form-label"}," Title ",-1),et={class:"text-danger mt-1"},st={class:"text-danger mt-1"},ot={class:"mb-3"},nt=t("label",{for:"post-content",class:"form-label"}," Content ",-1),at={class:"text-danger mt-1"},it={class:"text-danger mt-1"},lt={class:"mb-3"},rt=t("label",{for:"post-category",class:"form-label"}," Category ",-1),dt={class:"text-danger mt-1"},ct={class:"text-danger mt-1"},ut={class:"mb-3"},mt=t("label",{for:"thumbnail",class:"form-label"}," Thumbnail ",-1),_t={class:"text-danger mt-1"},vt={class:"mt-4"},pt=["disabled"],ht={class:""},bt={key:0},ft={key:1},Ft={__name:"Edit",setup(gt){V("required",K),V("min",O);const w={title:"required|min:5",content:"required|min:50",category_id:"required"},{validate:C,errors:m,resetForm:yt}=J({validationSchema:w}),{value:F}=p("title",null,{initialValue:""}),{value:S}=p("content",null,{initialValue:""}),{value:q}=p("category_id",null,{initialValue:"",label:"category"}),{categoryList:E,getCategoryList:k}=H(),{post:r,getPost:B,updatePost:D,validationErrors:d,isLoading:_}=I(),s=T({title:F,content:S,category_id:q,thumbnail:""}),L=U();function P(){C().then(h=>{h.valid&&D(s)})}return N(()=>{B(L.params.id),k()}),R(()=>{s.id=r.value.id,s.title=r.value.title,s.content=r.value.content,s.category_id=r.value.category_id}),(h,i)=>{var b,f,g,y;const M=j("v-select");return o(),n("div",Q,[t("div",W,[t("div",X,[t("div",Y,[t("form",{onSubmit:z(P,["prevent"])},[t("div",$,[tt,v(t("input",{"onUpdate:modelValue":i[0]||(i[0]=e=>s.title=e),id:"post-title",type:"text",class:"form-control"},null,512),[[x,s.title]]),t("div",et,l(a(m).title),1),t("div",st,[(o(!0),n(c,null,u((b=a(d))==null?void 0:b.title,e=>(o(),n("div",null,l(e),1))),256))])]),t("div",ot,[nt,v(t("textarea",{"onUpdate:modelValue":i[1]||(i[1]=e=>s.content=e),id:"post-content",class:"form-control"},null,512),[[x,s.content]]),t("div",at,l(a(m).content),1),t("div",it,[(o(!0),n(c,null,u((f=a(d))==null?void 0:f.content,e=>(o(),n("div",null,l(e),1))),256))])]),t("div",lt,[rt,A(M,{modelValue:s.category_id,"onUpdate:modelValue":i[2]||(i[2]=e=>s.category_id=e),options:a(E),reduce:e=>e.id,label:"name",class:"form-control"},null,8,["modelValue","options","reduce"]),t("div",dt,l(a(m).category_id),1),t("div",ct,[(o(!0),n(c,null,u((g=a(d))==null?void 0:g.category_id,e=>(o(),n("div",null,l(e),1))),256))])]),t("div",ut,[mt,t("input",{onChange:i[3]||(i[3]=e=>s.thumbnail=e.target.files[0]),type:"file",class:"form-control",id:"thumbnail"},null,32),t("div",_t,[(o(!0),n(c,null,u((y=a(d))==null?void 0:y.thumbnail,e=>(o(),n("div",null,l(e),1))),256))])]),t("div",vt,[t("button",{disabled:a(_),class:"btn btn-primary"},[v(t("div",ht,null,512),[[G,a(_)]]),a(_)?(o(),n("span",bt,"Processing...")):(o(),n("span",ft,"Save"))],8,pt)])],40,Z)])])])])}}};export{Ft as default};
