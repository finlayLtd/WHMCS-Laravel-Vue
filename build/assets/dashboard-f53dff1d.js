import{k as n,u as j,c as _,r as D,b as o,d as a,e as t,h as m,l as C,m as O,F as w,A as S,g as A,t as i,n as R}from"./app-1c59e5b4.js";import{_ as F}from"./services-81c1d4cb.js";import{c as I,s as $}from"./loading-f6678eee.js";import"./theme-sugar-6744922a.js";const P={class:"dashboard"},q={class:"container"},z={class:"d-flex justify-content-between align-items-center title-button-wrapper position-relative"},E=t("h2",{class:"title mb-0"},"Dashboard",-1),G=t("button",{type:"submit",class:"btn btn-dark btn-chevron chevron-dark hover-dark-light options-toggle dropdown-toggle","data-bs-toggle":"dropdown"}," Create Server ",-1),H={class:"options-toggle-dropdown create-server dropdown-menu dropdown-menu-end"},J={class:"sub-section server-list-tab"},K={class:"row justify-content-between align-items-center"},M={class:"col-md-12"},Q={class:"w-100 mb-2 mb-lg-5"},U=t("h3",{class:"sub-title"},"Support Tickets",-1),W={style:{display:"flex","justify-content":"space-between"}},X={class:"sort-servers order-2 order-md-1"},Y=t("span",null,"Sort by...",-1),Z=[Y],tt={key:0,class:"sorting-items"},et={class:"nav nav-pills mb-3 mb-md-0 order-1 order-md-2 mb-lg-0",id:"pills-tab",role:"tablist"},st={class:"nav-item",role:"presentation"},lt=["id","data-bs-target","aria-controls","onClick"],ot={class:"w-100 support-table mb-4"},at={class:"table"},nt=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"Ticket No"),t("th",{scope:"col"},"Title"),t("th",{scope:"col"},"Priority"),t("th",{scope:"col"},"Date"),t("th",{scope:"col"},"Status")])],-1),it={key:0},rt=t("td",{colspan:"5",style:{"text-align":"center"}},[t("h5",{style:{"margin-top":"20px"}},"No tickets")],-1),ct=[rt],dt={class:"refund-request"},ut={class:"date-cell"},ht={__name:"dashboard",setup(pt){const x=I(),d=n(!1),T=j(),b=_(()=>T.state.auth.user),r=n([]),h=n([]),u=n("All"),L=n(["All","Open","Answered","Customer-Reply","Closed"]);console.log(b.value.client_id);const v=n({client_id:b.value.client_id,orderby:"",order:""}),g=()=>{$(!0),x.runGetApi("/support-ticket",v.value).then(s=>{$(!1),d.value=!1,console.log(s.data),r.value=s.data.tickets;const l=_(()=>{var c,e;return(e=(c=s==null?void 0:s.data)==null?void 0:c.status)==null?void 0:e.filter(k=>L.value.includes(k.title))});console.log("filteredStatus",l.value),h.value=l.value}).catch(s=>{console.log(s)})};g();function f(s){return`pills-${y(s)}`}function N(s){return`pills-${y(s)}-tab`}function y(s){return s.toLowerCase().replace(/ /g,"-")}function p(s,l){v.value.orderby=s,v.value.order=l,g()}function B(s){return s=="Answered"?"successful-cell":s=="Closed"?"cancelled-cell":"in-progress-cell"}const V=_(()=>u.value==="All"?r.value:r.value.filter(s=>s.status===u.value));return(s,l)=>{const c=D("router-link");return o(),a("section",P,[t("div",q,[t("div",z,[E,G,t("div",H,[t("ul",null,[t("li",null,[m(c,{to:"/create-vps-server"},{default:C(()=>[A("Create VPS Server")]),_:1})])])])]),t("div",J,[t("div",K,[t("div",M,[t("div",Q,[U,t("div",W,[t("div",X,[t("div",{id:"toggleButton",class:"sort-item-active btn-chevron chevron-dark",style:{width:"160px"},onClick:l[0]||(l[0]=e=>d.value=!d.value)},Z),d.value?(o(),a("div",tt,[t("ul",null,[t("li",{class:"touch-item",onClick:l[1]||(l[1]=e=>p("date","desc"))}," Opened-latest "),t("li",{class:"touch-item",onClick:l[2]||(l[2]=e=>p("date","asc"))}," Opened-oldest "),t("li",{class:"touch-item",onClick:l[3]||(l[3]=e=>p("lastreply","desc"))}," Last-Reply-latest "),t("li",{class:"touch-item",onClick:l[4]||(l[4]=e=>p("date","asc"))}," Last-Reply-oldest ")])])):O("",!0)]),t("ul",et,[t("li",st,[t("button",{class:"nav-link active",id:"pills-all-tab","data-bs-toggle":"pill","data-bs-target":"#pills-all",type:"button",role:"tab","aria-controls":"pills-all","aria-selected":"true",onClick:l[5]||(l[5]=e=>u.value="All")}," All ")]),(o(!0),a(w,null,S(h.value,e=>(o(),a("li",{key:e.title,class:"nav-item",role:"presentation"},[t("button",{id:N(e.title),class:"nav-link","data-bs-toggle":"pill","data-bs-target":"#"+f(e.title),type:"button",role:"tab","aria-controls":f(e.title),"aria-selected":!1,onClick:k=>u.value=e.title},i(e.title),9,lt)]))),128))])])]),t("div",ot,[t("table",at,[nt,t("tbody",null,[!r.value||r.value.length===0?(o(),a("tr",it,ct)):(o(!0),a(w,{key:1},S(V.value,e=>(o(),a("tr",{key:e.id},[t("td",null,[m(c,{to:{name:"ticket-detail",params:{id:e.id}}},{default:C(()=>[A(" #"+i(e.tid),1)]),_:2},1032,["to"])]),t("td",null,i(e.subject),1),t("td",dt,i(e.priority),1),t("td",ut,i(e.date),1),t("td",{class:R(B(e.status))},[t("span",null,i(e.status),1)],2)]))),128))])])])])])]),m(F)])])}}};export{ht as default};
