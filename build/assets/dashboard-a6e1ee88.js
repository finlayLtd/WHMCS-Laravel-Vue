import{f as n,b as F,d as h,r as R,o as i,c as r,h as t,t as o,a as p,i as w,m as H,l as q,F as T,s as P,j as S,x as z}from"./app-5f59d904.js";import{L as E,S as G}from"./services-e5070280.js";import{c as U}from"./commonApis-4afe13c5.js";import{P as J}from"./Pagination-4fa1b581.js";const K={class:"dashboard"},Q={class:"container"},W={class:"d-flex justify-content-between align-items-center title-button-wrapper position-relative"},X={class:"title mb-0"},Y={type:"submit",class:"btn btn-dark btn-chevron chevron-dark hover-dark-light options-toggle dropdown-toggle","data-bs-toggle":"dropdown"},Z={class:"options-toggle-dropdown create-server dropdown-menu dropdown-menu-end"},x={class:"sub-section server-list-tab vl-parent"},tt={class:"row justify-content-between align-items-center"},et={class:"col-md-12"},st={class:"w-100 mb-2 mb-lg-5"},lt={class:"sub-title"},ot={style:{display:"flex","justify-content":"space-between"}},at={class:"sort-servers order-2 order-md-1"},nt={key:0,class:"sorting-items"},it={class:"nav nav-pills mb-3 mb-md-0 order-1 order-md-2 mb-lg-0",id:"pills-tab",role:"tablist"},rt={class:"nav-item",role:"presentation"},dt=["id","data-bs-target","aria-controls","onClick"],ct={class:"w-100 support-table mb-4"},ut={class:"table"},vt={scope:"col"},pt={scope:"col"},_t={scope:"col"},gt={scope:"col"},ht={scope:"col"},bt={key:0},mt={colspan:"5",style:{"text-align":"center"}},ft={style:{"margin-top":"20px"}},kt=["innerHTML"],yt={class:"refund-request"},$t={class:"date-cell"},Ct={class:"w-100 server-list-pagination"},b=5,Lt={__name:"dashboard",setup(wt){const u=n(!1),A=U(),_=n(!1),L=F(),N=h(()=>L.state.auth.user),v=n([]),f=n([]),j=n(0),d=n("All"),B=n(["All","Open","Answered","Customer-Reply","Closed"]),c=n({client_id:N.value.client_id,orderby:"",order:"",page:1}),k=()=>{u.value=!0,A.runGetApi("/support-ticket",c.value).then(e=>{u.value=!1,_.value=!1,v.value=e.data.tickets;const l=h(()=>{var s,m;return(m=(s=e==null?void 0:e.data)==null?void 0:s.status)==null?void 0:m.filter(O=>B.value.includes(O.title))});f.value=l.value;const a=e.data.totalTickets;j.value=Math.ceil(a/b)}).catch(e=>{console.log(e),u.value=!1})};k();function D(e){c.value.page=e}function y(e){return`pills-${$(e)}`}function V(e){return`pills-${$(e)}-tab`}function $(e){return e.toLowerCase().replace(/ /g,"-")}function g(e,l){c.value.orderby=e,c.value.order=l,k()}function I(e){return e=="Answered"?"successful-cell":e=="Closed"?"cancelled-cell":"in-progress-cell"}const C=n([]),M=h(()=>{let e;d.value==="All"?e=v.value:e=v.value.filter(a=>a.status===d.value);const l=h(()=>{const a=(c.value.page-1)*b,s=a+b;return e.slice(a,s)});return C.value[d.value]=Math.ceil(e.length/b),l.value});return(e,l)=>{const a=R("router-link");return i(),r("section",K,[t("div",Q,[t("div",W,[t("h2",X,o(e.$t("Dashboard")),1),t("button",Y,o(e.$t("Create_server")),1),t("div",Z,[t("ul",null,[t("li",null,[p(a,{to:"/create-vps-server"},{default:w(()=>[S(o(e.$t("Create_VPS_Server")),1)]),_:1})])])])]),t("div",x,[p(H(E),{active:u.value,"onUpdate:active":l[0]||(l[0]=s=>u.value=s),"is-full-page":!1},null,8,["active"]),t("div",tt,[t("div",et,[t("div",st,[t("h3",lt,o(e.$t("Support_Tickets")),1),t("div",ot,[t("div",at,[t("div",{id:"toggleButton",class:"sort-item-active btn-chevron chevron-dark",style:{width:"160px"},onClick:l[1]||(l[1]=s=>_.value=!_.value)},[t("span",null,o(e.$t("Sort_by"))+"...",1)]),_.value?(i(),r("div",nt,[t("ul",null,[t("li",{class:"touch-item",onClick:l[2]||(l[2]=s=>g("date","desc"))},o(e.$t("Opened_latest")),1),t("li",{class:"touch-item",onClick:l[3]||(l[3]=s=>g("date","asc"))},o(e.$t("Opened_oldest")),1),t("li",{class:"touch-item",onClick:l[4]||(l[4]=s=>g("lastreply","desc"))},o(e.$t("Last_Reply_latest")),1),t("li",{class:"touch-item",onClick:l[5]||(l[5]=s=>g("date","asc"))},o(e.$t("Last_Reply_oldest")),1)])])):q("",!0)]),t("ul",it,[t("li",rt,[t("button",{class:"nav-link active",id:"pills-all-tab","data-bs-toggle":"pill","data-bs-target":"#pills-all",type:"button",role:"tab","aria-controls":"pills-all","aria-selected":"true",onClick:l[6]||(l[6]=s=>d.value="All")}," All ")]),(i(!0),r(T,null,P(f.value,s=>(i(),r("li",{key:s.title,class:"nav-item",role:"presentation"},[t("button",{id:V(s.title),class:"nav-link","data-bs-toggle":"pill","data-bs-target":"#"+y(s.title),type:"button",role:"tab","aria-controls":y(s.title),"aria-selected":!1,onClick:m=>d.value=s.title},o(s.title),9,dt)]))),128))])])]),t("div",ct,[t("table",ut,[t("thead",null,[t("tr",null,[t("th",vt,o(e.$t("Ticket_No")),1),t("th",pt,o(e.$t("Title")),1),t("th",_t,o(e.$t("Priority")),1),t("th",gt,o(e.$t("Date_title")),1),t("th",ht,o(e.$t("Status")),1)])]),t("tbody",null,[!v.value||v.value.length===0?(i(),r("tr",bt,[t("td",mt,[t("h5",ft,o(e.$t("No_tickets")),1)])])):(i(!0),r(T,{key:1},P(M.value,s=>(i(),r("tr",{key:s.id},[t("td",null,[p(a,{to:{name:"ticket-detail",params:{id:s.id}}},{default:w(()=>[S(" #"+o(s.tid),1)]),_:2},1032,["to"])]),t("td",{innerHTML:s.subject},null,8,kt),t("td",yt,o(s.priority),1),t("td",$t,o(s.date),1),t("td",{class:z(I(s.status))},[t("span",null,o(s.status),1)],2)]))),128))])])]),t("div",Ct,[p(J,{currentPage:c.value.page,totalPages:C.value[d.value],onPageChanged:D},null,8,["currentPage","totalPages"])])])])]),p(G)])])}}};export{Lt as default};
